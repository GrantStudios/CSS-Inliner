const container=document.querySelector(".container"),navbar=document.querySelector(".navbar"),windowHeight=window.innerHeight;container.style.height=windowHeight-navbar.offsetHeight+"px";const HTMLparser=new DOMParser;var htmlMixedEditor=CodeMirror.fromTextArea(htmleditor,{mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,theme:"dracula"}),cssEditor=CodeMirror.fromTextArea(csseditor,{mode:"css",lineNumbers:!0,lineWrapping:!0,theme:"dracula"}),result=CodeMirror.fromTextArea(resulteditor,{mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,theme:"dracula",readOnly:!0});function changeListener(){try{const e=htmlMixedEditor.getValue(),t=cssEditor.getValue(),r=cssparser.parse(t);if(r){const t=r.toJSON("simple"),o=HTMLparser.parseFromString(e,"text/html");window.e=o,window.y=t,t.value.forEach(e=>{if("rule"==e.type){const t=Object.keys(e.declarations);e.selectors.forEach(r=>{o.body.querySelectorAll(r).forEach(r=>{t.forEach(t=>r.style[t]=e.declarations[t])})})}else if("@import"==e.type){let r=e.value.match(/'|"/g),n=e.value.indexOf(r[0]),a=e.value.lastIndexOf(r[r.length-1]);const i=e.value.substring(n+1,a);var t=document.createElement("link");t.href=i,t.rel="stylesheet",o.head.appendChild(t)}}),result.getDoc().setValue(html_beautify(o.documentElement.outerHTML))}}catch(e){console.log(e),result.getDoc().setValue("...")}}htmlMixedEditor.on("change",changeListener),cssEditor.on("change",changeListener);